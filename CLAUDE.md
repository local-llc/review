# Code Review Directory

The diffs have already been generated by `./main.sh` and extracted into `./reviews/owner-repo/pr-number/`.

## Review Structure

For each PR review, check:
1. `summary.txt` - PR overview with metadata
2. `raw.diff` - Complete diff file
3. `files/*.diff` - Individual file diffs

If the review directory doesn't have enough information to understand the context, refer to the actual repository code in `./repos/owner/repo/`.

## Review Policy

### Overview Section
* Start with PR title, author, and affected files
* Provide a brief positive summary (2-3 sentences max)

### Focus Areas
1. **Vulnerabilities (脆弱性)**
   - Security issues (XSS, injection, exposed secrets)
   - Unsafe data handling
   - Authentication/authorization flaws

2. **Logic Flaws (ロジックの問題)**
   - Race conditions
   - Incorrect business logic
   - Edge cases not handled
   - Performance issues from inefficient algorithms

3. **Code Quality Issues**
   - Memory leaks
   - Uncaught errors
   - Missing error handling
   - Dead code or unreachable conditions

4. **Naming/Comment Issues (命名・コメントの問題)**
   - Temporal references (new, old, updated, fixed, temp)
   - Contextual references without context (correct, proper, better)
   - Implementation comments without business context
   - Version numbers in names (functionV2, dataNew2)

5. **Minor Issues**
   - Typos in strings/comments
   - Full-width spaces in code

### Review Format

```
## コードレビュー結果

### PR概要
- **タイトル**: [PR title]
- **作成者**: [author]
- **状態**: [state]
- **変更ファイル**: [list of main files]

### ポジティブな点（要約）
[2-3 sentence summary of what was done well]

### 指摘事項

#### 1. **[Category]: [Brief description]**
**該当箇所**: [file:line number]

```[language]
[problematic code snippet]
```

[Explanation of the issue]

**修正案**:
```[language]
[suggested fix]
```

### Re-evaluation of Issues

Re-evaluating each issue considering existing implementation patterns and codebase conventions.

#### Re-evaluation of Issue 1
**Consistency with existing code**: [Consistent/Inconsistent]
**Verdict**: [Fix recommended/Acceptable given existing patterns]
**Rationale**: [Explanation based on surrounding code patterns and existing design decisions]

#### Re-evaluation of Issue 2
...
```

### Naming/Comment Review Guidelines

#### Problem Patterns to Flag
1. **Temporal References**
   ```javascript
   // BAD
   const newFunction = () => {}
   const updatedData = {}
   const fixedCalculation = () => {}
   const tempSolution = {}
   ```

2. **Contextual References Without Context**
   ```javascript
   // BAD
   const correctValue = 42  // correct according to what?
   const betterAlgorithm = () => {}  // better than what?
   return value * 1.08  // updated rate
   ```

#### Good Patterns
1. **Descriptive Purpose-Based Names**
   ```javascript
   // GOOD
   const calculateTaxInclusivePrice = () => {}
   const sessionCache = {}  // instead of tempSolution
   ```

2. **Comments with Business/Technical Context**
   ```javascript
   // GOOD
   return value * 1.08  // 8% consumption tax rate (Japan)
   if (count > 5) {}  // Maximum retry attempts per customer requirement
   ```

### What NOT to Review
* Style preferences (unless it causes actual issues)
* Generic "best practices" without specific problems
* Features that work correctly but could be "improved"
* Formatting issues (assume they have linters)

## Repository Policy

If you identify a rule that should be a standard improvement for code reviews, feel free to ask the user to append it to CLAUDE.md

## Output

Please provide output in Japanese

